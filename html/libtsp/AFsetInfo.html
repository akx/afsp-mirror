<html>
<head>
<style>
  body { font-family: Verdana, Arial, Helvetica, sans-serif;
         font-size: 12px; background-color: #FFFFD7; }
  h1   { font-family: Verdana, Arial, Helvetica, sans-serif; color: #6699CC;
         font-size:160%; font-weight:bold; margin: 0px 0px 8px 0px; }
  h2   { font-family: Verdana, Arial, Helvetica, sans-serif; color: #5588BB;
         font-size:130%; font-weight:bold; margin: 0px 0px 12px 0px; }
  h3   { font-family: Verdana, Arial, Helvetica, sans-serif; color: #4477AA;
         font-size:120%; font-weight:bold; margin: 0px 0px 12px 0px; }
  pre  { color: #0000A0; }
</style>
<title>AFsetInfo</title>
</head>
<body>
<h2>AFsetInfo</h2>
<hr>
<h3>Routine:</h3>
<p>
void AFsetInfo(const char InfoRec[])
</p>
<h3>Purpose:</h3>
<p>
Add an audio file information record
</p>
<h3>Description:</h3>
<p>
This routine adds an information string to be written to an audio file header
or trailer. By default standard information records (see below) are used.
This routine allows the user to specify information records that are used in
addition to, or in place of, the standard information records. This routine
must be called before the audio file is opened using AFopnWrite. After the
file has been opened the information records are reset. In addition, the
default condition (use both the standard information records and the user
information records) is re-established.
</p>
<dl>
<dt>Standard Information:</dt>
<dd>
<pre>
 date: 1994-01-25 19:19:39 UTC  date and time
 sample_rate: 8012.5            sampling frequency (if non-integer)
 program: CopyAudio             program name (if set by UTsetProg)
 loudspeakers: FL FR FC         loudspeaker locations (if specified)
 bits_per_sample: 12/16         bits/sample (if specified)
</pre>
</dd>
<dt>Notes:</dt>
<dt>- AIFF and AIFF-C files have a floating point representation of the sampling</dt>
<dd>
frequency. As a result, the "sample_rate:" information record will not be
generated even for non-integer sampling frequencies.
</dd>
<dt>- The loudspeaker configuration is stored in a field in the WAVE-EX file</dt>
<dd>
format. The "loudspeakers:" information record will not be generated for
WAVE files if they are promoted to WAVE-EX files.
</dd>
<dt>- The bits/sample value is stored in AIFF, AIFF-C, and WAVE-EX files. The</dt>
<dd>
"bits_per_sample:" record will not be generated for AIFF, AIFF, WAVE
(promoted to WAVE-EX), or WAVE-EX files.
</dd>
<dt>- For WAVE files, the text from a "program:" or a "date:" information record</dt>
<dd>
is stored in the LIST chunk as detailed below.
</dd>
<dt>- For text audio files, additional information records are generated by</dt>
<dd>
default ("channels":, "frames:", "full_scale:").
</dd>
</dl>
<p>
If the input information record is empty, the standard information will not
be used and any previous user supplied information records will be discarded.
Subsequent calls to this routine can be used to specify new information
records.
</p>
<p>
User supplied information records should follow the format of a named field
terminated by a colon followed by text. Each time AFsetInfo is called, a user
supplied information record is appended to the user information.
</p>
<dl>
<dt>Notes:</dt>
<dt>- WAVE files</dt>
<dd>
These files have provision for storing text information in a DISP or LIST
chunk. Text from information records with the following named fields is
transferred as follows:
</dd>
<dd>
<pre>
 "display_text:"             =&gt; DISP chunk
 "archival_location:"        =&gt; IARL field of a LIST/INFO chunk
 "artist:"                   =&gt; IART field of a LIST/INFO chunk
 "commissioned:              =&gt; ICMS field of a LIST/INFO chunk
 "comment:" or "comments:"   =&gt; ICMT field of a LIST/INFO chunk
 "copyright:"                =&gt; ICOP field of a LIST/INFO chunk
 "creation_date:", "date:", or "recording_date:"
                             =&gt; ICRD field of a LIST/INFO chunk
 "engineer:"                 =&gt; IENG field of a LIST/INFO chunk
 "genre:"                    =&gt; IGNR field of a LIST/INFO chunk
 "keywords:"                 =&gt; IKEY field of a LIST/INFO chunk
 "medium"                    =&gt; IMED field of a LIST/INFO chunk
 "title:" or "name:"         =&gt; INAM field of a LIST/INFO chunk
 "product:"                  =&gt; IPRD field of a LIST/INFO chunk
 "subject:"                  =&gt; ISBJ field of a LIST/INFO chunk
 "software:" or "program:"   =&gt; ISFT field of a LIST/INFO chunk
 "source:"                   =&gt; ISRC field of a LIST/INFO chunk
 "source_form:"              =&gt; ISRF field of a LIST/INFO chunk
 "technician:"               =&gt; ITCH field of a LIST/INFO chunk
</pre>
</dd>
<dd>
When the audio file is opened with AFopnRead, the information records will
have the identifier of the first identifier if multiple identifiers are
available. For instance a record stored in the INAM field will have an
identifier "title:".
</dd>
<dt>- AIFF and AIFF-C files</dt>
<dd>
These files have provision for storing text informant in a NAME, AUTH, (c) ,
or ANNO chunk. Text from the information with the following named fields is
transferred as follows:
</dd>
<dd>
<pre>
  "title:" or "name:"        =&gt; NAME chunk
  "artist:" or "author:"     =&gt; AUTH chunk
  "copyright:"               =&gt; (c)  chunk
  "comment:", "comments:", or "annotation:"
                             =&gt; ANNO chunk
</pre>
</dd>
<dd>
When the audio file is opened with AFopnRead, the information records will
have the identifier of the first identifier if multiple identifiers are
available. For instance a record stored in the NAME chunk will be returned
with an identifier "title:".
</dd>
<dt>- AFsetInfo("")</dt>
<dd>
This form contains an empty record which signals that the standard
information records are not created. Subsequent user supplied records will
be used.
</dd>
<dt>- AFsetInfo("&lt;record&gt;")</dt>
<dd>
Append a user information record. Note that the information from a record
with "title:", "name:", "comment:", "comments", "utterance_id:, or
"display_text:" as an identifier is printed along with file information when
that file is opened for writing. Subsequently opening the file for reading
with AFopnRead will also display this description.
</dd>
</dl>
<p>
The information records are stored in the header of the output file.
</p>
<dl>
<dt>AU files:</dt>
<dd>
The information records appear just before the start of audio data. The
identifier tag "AFsp" marks the beginning of the information records.
</dd>
<dt>AIFF and AIFF-C files:</dt>
<dd>
The collection of information records which have not been reallocated to the
NAME, AUTH, (c) , or ANNO chunks are placed in a separate ANNO chunk with an
"AFsp" identifier as a prefix.
</dd>
<dt>WAVE files:</dt>
<dd>
The information records which have not been reallocated to the DISP or
LIST chunks appear in an "afsp" chunk.
</dd>
<dt>Text audio files:</dt>
<dd>
The information records are written to the header.
</dd>
</dl>
<h3>Parameters:</h3>
<dl>
<dt>&lt;-  void AFsetInfo</dt>
<dt> -&gt; const char InfoRec[]</dt>
<dd>
String containing the user supplied information. If this string is null,
standard information records will not be used and any previously entered
user information records will be discarded.
</dd>
</dl>
<h3>Author / revision:</h3>
<p>
P. Kabal
/ Revision 1.63  2020-11-23
</p>
<h3>See Also</h3>
<a href="AFopnWrite.html">AFopnWrite</a>,
<a href="AFprintInfoRecs.html">AFprintInfoRecs</a>
</body>
</html>
